/**
 * Multiplayer Panel Styles v2.0
 * ═══════════════════════════════════════════════════════════════════════════
 * Next-gen design with liquid glass, aurora accents, and spatial depth
 */

/* ═══════════════════════════════════════════════════════════════════════════
   MAIN PANEL
   ═══════════════════════════════════════════════════════════════════════════ */

.multiplayer-panel {
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
  padding: var(--space-5);
  background: var(--glass-bg);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border-radius: var(--radius-2xl);
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow-lg);
  position: relative;
  overflow: hidden;
}

/* Subtle gradient overlay */
.multiplayer-panel::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 80px;
  background: linear-gradient(
    180deg,
    rgba(124, 58, 237, 0.04) 0%,
    transparent 100%
  );
  pointer-events: none;
}

/* ═══════════════════════════════════════════════════════════════════════════
   HEADER
   ═══════════════════════════════════════════════════════════════════════════ */

.mp-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: var(--space-3);
  border-bottom: 1px solid var(--border-subtle);
  position: relative;
  z-index: 1;
}

.mp-header h3 {
  margin: 0;
  font-family: var(--font-display);
  font-size: var(--text-base);
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
  letter-spacing: var(--tracking-tight);
}

.mp-status {
  font-size: var(--text-xs);
  font-weight: var(--weight-medium);
  padding: var(--space-1) var(--space-3);
  border-radius: var(--radius-full);
  transition: var(--transition-all);
}

.mp-status.connected {
  color: var(--accent);
  background: rgba(0, 255, 214, 0.1);
  border: 1px solid rgba(0, 255, 214, 0.2);
  box-shadow: 0 0 12px rgba(0, 255, 214, 0.1);
}

.mp-status.disconnected {
  color: var(--text-muted);
  background: var(--glass-subtle);
  border: 1px solid var(--border-subtle);
}

/* ═══════════════════════════════════════════════════════════════════════════
   ERROR MESSAGE
   ═══════════════════════════════════════════════════════════════════════════ */

.mp-error {
  padding: var(--space-3) var(--space-4);
  background: var(--error-muted);
  border: 1px solid rgba(255, 51, 102, 0.25);
  border-radius: var(--radius-lg);
  color: var(--error);
  font-size: var(--text-sm);
  animation: slideDown var(--duration-normal) var(--ease-spring);
}

@keyframes slideDown {
  0% { opacity: 0; transform: translateY(-10px); }
  100% { opacity: 1; transform: translateY(0); }
}

/* ═══════════════════════════════════════════════════════════════════════════
   SECTIONS & LABELS
   ═══════════════════════════════════════════════════════════════════════════ */

.mp-section {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  position: relative;
  z-index: 1;
}

.mp-label {
  font-size: var(--text-xs);
  text-transform: uppercase;
  letter-spacing: var(--tracking-widest);
  color: var(--text-tertiary);
  font-weight: var(--weight-medium);
  margin-left: var(--space-1);
}

/* ═══════════════════════════════════════════════════════════════════════════
   NAME DISPLAY & EDIT
   ═══════════════════════════════════════════════════════════════════════════ */

.mp-name-display {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-3) var(--space-4);
  background: rgba(0, 0, 0, 0.2);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: var(--transition-all);
}

.mp-name-display:hover {
  background: rgba(0, 0, 0, 0.3);
  border-color: var(--border-default);
}

.mp-name-display span:first-child {
  font-weight: var(--weight-medium);
  color: var(--text-primary);
  font-size: var(--text-sm);
}

.mp-edit-hint {
  opacity: 0.3;
  font-size: var(--text-xs);
  transition: opacity var(--duration-fast) var(--ease-out);
}

.mp-name-display:hover .mp-edit-hint {
  opacity: 0.6;
}

.mp-name-edit {
  display: flex;
  gap: var(--space-2);
}

.mp-name-edit input {
  flex: 1;
  padding: var(--space-3) var(--space-4);
  background: rgba(0, 0, 0, 0.25);
  border: 1px solid var(--border-accent);
  border-radius: var(--radius-lg);
  color: var(--text-primary);
  font-size: var(--text-sm);
  font-family: var(--font-body);
  outline: none;
  transition: var(--transition-all);
}

.mp-name-edit input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(0, 255, 214, 0.1);
}

.mp-name-edit button {
  padding: var(--space-3) var(--space-4);
  background: var(--glass-bg);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  cursor: pointer;
  transition: var(--transition-all);
  font-size: var(--text-sm);
}

.mp-name-edit button:hover {
  background: rgba(0, 255, 214, 0.1);
  border-color: var(--border-accent);
}

/* ═══════════════════════════════════════════════════════════════════════════
   ACTION BUTTONS
   ═══════════════════════════════════════════════════════════════════════════ */

.mp-actions {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.mp-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  padding: var(--space-3) var(--space-4);
  border: none;
  border-radius: var(--radius-lg);
  font-size: var(--text-sm);
  font-weight: var(--weight-semibold);
  font-family: var(--font-body);
  cursor: pointer;
  transition: var(--transition-all);
}

.mp-btn.primary {
  background: linear-gradient(135deg, var(--violet) 0%, var(--violet-700) 100%);
  color: var(--text-on-accent);
  border: 1px solid var(--border-subtle);
  box-shadow: 0 4px 16px rgba(124, 58, 237, 0.3);
}

.mp-btn.primary:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 6px 24px rgba(124, 58, 237, 0.4);
}

.mp-btn.secondary {
  background: var(--glass-bg);
  color: var(--text-primary);
  border: 1px solid var(--border-default);
}

.mp-btn.secondary:hover:not(:disabled) {
  background: var(--glass-hover);
  border-color: var(--border-emphasis);
}

.mp-btn.danger {
  background: var(--error-muted);
  color: var(--error);
  border: 1px solid rgba(255, 51, 102, 0.2);
}

.mp-btn.danger:hover:not(:disabled) {
  background: rgba(255, 51, 102, 0.2);
  border-color: rgba(255, 51, 102, 0.35);
}

.mp-btn.small {
  padding: var(--space-2) var(--space-3);
  font-size: var(--text-xs);
  border-radius: var(--radius-md);
}

.mp-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  transform: none;
}

/* ═══════════════════════════════════════════════════════════════════════════
   JOIN FORM
   ═══════════════════════════════════════════════════════════════════════════ */

.mp-join-form {
  display: flex;
  flex-direction: column;
  gap: var(--space-3);
  padding: var(--space-4);
  background: rgba(0, 0, 0, 0.15);
  border-radius: var(--radius-xl);
  border: 1px solid var(--border-subtle);
}

.mp-join-form input {
  padding: var(--space-3) var(--space-4);
  background: rgba(0, 0, 0, 0.2);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  color: var(--text-primary);
  font-size: var(--text-sm);
  font-family: var(--font-mono);
  outline: none;
  transition: var(--transition-all);
}

.mp-join-form input::placeholder {
  color: var(--text-muted);
}

.mp-join-form input:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(0, 255, 214, 0.08);
}

.mp-join-buttons {
  display: flex;
  gap: var(--space-2);
}

.mp-join-buttons .mp-btn {
  flex: 1;
  padding: var(--space-3);
}

/* ═══════════════════════════════════════════════════════════════════════════
   ROOM INFO
   ═══════════════════════════════════════════════════════════════════════════ */

.mp-room-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-3) var(--space-4);
  background: rgba(0, 0, 0, 0.15);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-lg);
}

.mp-room-id {
  font-family: var(--font-mono);
  font-size: var(--text-sm);
  color: var(--accent);
  letter-spacing: var(--tracking-tight);
}

.mp-role {
  font-size: var(--text-xs);
  padding: var(--space-1) var(--space-2);
  background: var(--glass-subtle);
  border-radius: var(--radius-sm);
  color: var(--text-tertiary);
  font-weight: var(--weight-medium);
}

/* ═══════════════════════════════════════════════════════════════════════════
   PEERS LIST
   ═══════════════════════════════════════════════════════════════════════════ */

.mp-peers-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
  max-height: 150px;
  overflow-y: auto;
  padding-right: var(--space-1);
}

.mp-peer {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  padding: var(--space-3);
  background: rgba(0, 0, 0, 0.1);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-md);
  font-size: var(--text-sm);
  transition: var(--transition-all);
}

.mp-peer:hover {
  background: rgba(0, 0, 0, 0.15);
  border-color: var(--border-default);
}

.mp-peer.local {
  border-color: rgba(0, 255, 214, 0.2);
  background: rgba(0, 255, 214, 0.03);
}

.mp-peer-avatar {
  font-size: 1.1rem;
  opacity: 0.9;
  display: flex;
  align-items: center;
  justify-content: center;
}

.mp-peer-name {
  flex: 1;
  color: var(--text-primary);
  display: flex;
  gap: var(--space-2);
  align-items: center;
  font-weight: var(--weight-medium);
}

.mp-you {
  font-size: var(--text-xs);
  color: var(--accent);
  font-weight: var(--weight-semibold);
  background: rgba(0, 255, 214, 0.1);
  padding: 2px var(--space-2);
  border-radius: var(--radius-sm);
}

.mp-peer-latency {
  font-size: var(--text-xs);
  color: var(--text-muted);
  font-family: var(--font-mono);
}

.mp-peer-status {
  font-size: 0.5rem;
}

.mp-peer-status.connected {
  color: var(--accent);
}

.mp-peer-status.disconnected,
.mp-peer-status.error {
  color: var(--text-disabled);
}

/* ═══════════════════════════════════════════════════════════════════════════
   FOOTER
   ═══════════════════════════════════════════════════════════════════════════ */

.mp-footer {
  text-align: center;
  color: var(--text-muted);
  font-size: var(--text-xs);
  padding-top: var(--space-3);
  margin-top: var(--space-1);
  border-top: 1px solid var(--border-subtle);
}

/* ═══════════════════════════════════════════════════════════════════════════
   COMPACT MODE (Viewport Overlay)
   ═══════════════════════════════════════════════════════════════════════════ */

.multiplayer-compact {
  display: flex;
  align-items: center;
  gap: var(--space-2);
}

.mp-status-badge {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  background: var(--glass-bg);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border-radius: var(--radius-full);
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow-md);
  transition: var(--transition-all);
}

.mp-status-badge.connected {
  border-color: rgba(0, 255, 214, 0.2);
  box-shadow: var(--shadow-md), 0 0 16px rgba(0, 255, 214, 0.1);
}

.mp-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--accent);
  animation: pulse 2s ease-in-out infinite;
  box-shadow: 0 0 10px var(--accent);
}

.mp-count {
  font-size: var(--text-xs);
  font-weight: var(--weight-semibold);
  color: var(--text-primary);
  font-family: var(--font-mono);
}

.mp-leave-btn {
  width: 20px;
  height: 20px;
  border: none;
  background: var(--error-muted);
  color: var(--error);
  border-radius: 50%;
  font-size: var(--text-xs);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--transition-all);
  margin-left: var(--space-1);
}

.mp-leave-btn:hover {
  background: rgba(255, 51, 102, 0.25);
  transform: scale(1.1);
}

.mp-quick-join {
  width: 44px;
  height: 44px;
  border: none;
  background: var(--glass-bg);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border-radius: 50%;
  border: 1px solid var(--glass-border);
  font-size: 1.2rem;
  cursor: pointer;
  transition: var(--transition-all);
  box-shadow: var(--shadow-md);
  display: flex;
  align-items: center;
  justify-content: center;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

.mp-quick-join:hover:not(:disabled) {
  background: linear-gradient(135deg, var(--violet) 0%, var(--violet-700) 100%);
  border-color: rgba(124, 58, 237, 0.4);
  transform: scale(1.08);
  box-shadow: var(--shadow-lg), 0 0 24px rgba(124, 58, 237, 0.3);
}

.mp-quick-join:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

/* ═══════════════════════════════════════════════════════════════════════════
   RESPONSIVE
   ═══════════════════════════════════════════════════════════════════════════ */

@media (max-width: 640px) {
  .multiplayer-panel {
    padding: var(--space-4);
    gap: var(--space-3);
  }

  .mp-header h3 {
    font-size: var(--text-sm);
  }

  .mp-btn {
    padding: var(--space-4) var(--space-4);
    font-size: var(--text-sm);
    min-height: 48px;
  }

  .mp-name-display,
  .mp-room-info {
    padding: var(--space-3) var(--space-4);
  }

  .mp-join-form input {
    padding: var(--space-3) var(--space-4);
    font-size: 16px; /* Prevent iOS zoom */
  }

  .mp-peers-list {
    max-height: 120px;
  }

  .mp-peer {
    padding: var(--space-3);
  }
}

/* Prevent text selection */
.multiplayer-panel,
.multiplayer-compact {
  -webkit-user-select: none;
  user-select: none;
}
